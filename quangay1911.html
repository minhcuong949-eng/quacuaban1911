<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hi·ªáu ·ª®ng Matrix T√¨nh Y√™u</title>
    <style>
        /* Thi·∫øt l·∫≠p CSS */
        body {
            margin: 0;
            overflow: hidden; /* ·∫®n thanh cu·ªôn */
            background-color: #000; /* N·ªÅn ƒëen */
        }
        #loveMatrix {
            display: block; /* ƒê·∫£m b·∫£o canvas l·∫•p ƒë·∫ßy */
        }

        /* --- CSS cho VƒÉn b·∫£n Trung t√¢m L·∫•p l√°nh --- */
        #overlay-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff; /* M√†u ch·ªØ tr·∫Øng */
            
            /* Font ch·ªØ d√†y */
            font-family: 'Arial Black', sans-serif; /* Font d√†y h∆°n */
            text-align: center;
            font-weight: 900; /* ƒê·∫£m b·∫£o ƒë·ªô d√†y t·ªëi ƒëa */

            /* --- ƒêI·ªÄU CH·ªàNH FONT SIZE V·ª™A KHUNG ·∫¢NH --- */
            /* S·ª≠ d·ª•ng vw (viewport width) ƒë·ªÉ font size t·ª± ƒë·ªông co gi√£n */
            font-size: 8vw; 

            /* T·ªëi ∆∞u cho PC/M√†n h√¨nh l·ªõn (gi·ªõi h·∫°n size ch·ªØ t·ªëi ƒëa) */
            @media (min-width: 1200px) {
                font-size: min(8vw, 100px); 
            }
            /* ------------------------------------------- */
            
            /* Hi·ªáu ·ª©ng l·∫•p l√°nh (Glitter/Sparkle) */
            text-shadow: 
                0 0 10px rgba(255, 255, 255, 0.8), 
                0 0 20px rgba(255, 255, 255, 0.6), 
                0 0 30px rgba(255, 255, 255, 0.4),
                0 0 40px #fff; 

            /* Hi·ªáu ·ª©ng xu·∫•t hi·ªán/k·∫øt th√∫c - M·∫∑c ƒë·ªãnh ·∫©n */
            opacity: 0; 
            transition: 
                opacity 0.5s ease-in-out, 
                transform 0.5s ease-in-out;
        }

        /* --- Hi·ªáu ·ª©ng Tr√°i Tim ƒê·ªè R·ª±c (K·∫øt th√∫c) --- */
        .final-heart {
            color: #FF0000 !important; /* M√†u ƒë·ªè r·ª±c */
            font-size: 25vw !important; /* R·∫•t to, chi·∫øm ph·∫ßn l·ªõn m√†n h√¨nh */
            /* TƒÉng c∆∞·ªùng hi·ªáu ·ª©ng ph√°t s√°ng m√†u ƒë·ªè */
            text-shadow: 
                0 0 30px rgba(255, 0, 0, 1), 
                0 0 60px rgba(255, 50, 50, 0.8), 
                0 0 100px rgba(255, 100, 100, 0.5) !important;
        }

        /* Keyframes cho hi·ªáu ·ª©ng nh·∫•p nh√°y l·∫•p l√°nh nh·∫π (m√†u tr·∫Øng) */
        @keyframes pulse-glitter {
            from {
                text-shadow: 
                    0 0 10px rgba(255, 255, 255, 0.8), 
                    0 0 25px rgba(255, 255, 255, 0.6), 
                    0 0 50px rgba(255, 255, 255, 0.3);
            }
            to {
                text-shadow: 
                    0 0 5px rgba(255, 255, 255, 1), 
                    0 0 15px rgba(255, 255, 255, 0.8), 
                    0 0 30px rgba(255, 255, 255, 0.5);
            }
        }

        /* Keyframes cho hi·ªáu ·ª©ng nh·∫•p nh√°y Tr√°i Tim ƒê·ªè */
        .final-heart.show-text {
            animation: pulse-red-heart 1.5s infinite alternate !important;
        }
        @keyframes pulse-red-heart {
            from {
                text-shadow: 0 0 30px #f00, 0 0 60px #f00;
            }
            to {
                text-shadow: 0 0 15px #f00, 0 0 45px #f00;
            }
        }


        /* Class hi·ªÉn th·ªã vƒÉn b·∫£n (Fade in) */
        .show-text {
            opacity: 1 !important;
            transform: translate(-50%, -50%) scale(1) !important;
            animation: pulse-glitter 1.5s infinite alternate; /* M·∫∑c ƒë·ªãnh nh·∫•p nh√°y m√†u tr·∫Øng */
        }

        /* Class tan bi·∫øn (Glitter Disappear) */
        .hide-text {
            /* Gi·∫£m ƒë·ªô trong su·ªët v√† ph√≥ng to nhanh ch√≥ng ƒë·ªÉ m√¥ ph·ªèng "n·ªï/tan bi·∫øn" */
            opacity: 0 !important;
            transform: translate(-50%, -50%) scale(1.5) !important; 
            /* Th√™m animation "n·ªï kim tuy·∫øn" ƒë·ªÉ ho√†n thi·ªán hi·ªáu ·ª©ng */
            animation: glitter-burst 0.5s forwards;
        }

        /* Keyframes cho hi·ªáu ·ª©ng tan bi·∫øn kim tuy·∫øn */
        @keyframes glitter-burst {
            0% { 
                filter: drop-shadow(0 0 10px #fff) drop-shadow(0 0 30px #fff);
            }
            100% {
                filter: drop-shadow(0 0 50px #fff) drop-shadow(0 0 100px #fff); 
            }
        }

    </style>
</head>
<body>
    <canvas id="loveMatrix"></canvas>
    <div id="overlay-text"></div>

    <script>
        // L·∫•y c√°c ph·∫ßn t·ª≠ Canvas v√† Text
        const canvas = document.getElementById('loveMatrix');
        const ctx = canvas.getContext('2d');
        const overlayText = document.getElementById('overlay-text');

        // Thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc canvas
        let w = canvas.width = window.innerWidth;
        let h = canvas.height = window.innerHeight;

        // K√Ω t·ª± s·∫Ω r∆°i: LOVE, YOU, I, v√† c√°c s·ªë
        const characters = 'L O V E Y O U I 0 1 2 3 4 5 6 7 8 9 $ % # @'.split('');
        const fontSize = 16;
        const columns = Math.floor(w / fontSize);
        
        // M·∫£ng ch·ª©a v·ªã tr√≠ y (d√≤ng) c·ªßa m·ªói c·ªôt
        const drops = Array(columns).fill(1);

        // M√†u cho hi·ªáu ·ª©ng Matrix (M√†u h·ªìng/ƒë·ªè ƒë·ªÉ ph√π h·ª£p v·ªõi ch·ªß ƒë·ªÅ t√¨nh y√™u)
        const loveColor = '#FF007F'; 
        const color = loveColor; 
        
        // C·∫≠p nh·∫≠t khi c·ª≠a s·ªï thay ƒë·ªïi k√≠ch th∆∞·ªõc
        window.onresize = () => {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        };

        // H√†m v·∫Ω hi·ªáu ·ª©ng m∆∞a k·ªπ thu·∫≠t s·ªë
        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, w, h);

            ctx.fillStyle = color;
            ctx.font = `${fontSize}px monospace`;

            for (let i = 0; i < drops.length; i++) {
                const text = characters[Math.floor(Math.random() * characters.length)];
                const x = i * fontSize;
                const y = drops[i] * fontSize;
                ctx.fillText(text, x, y);

                if (y * fontSize > h && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                
                drops[i]++;
            }
        }

        // --- Logic Hi·ªÉn th·ªã VƒÉn b·∫£n Trung t√¢m ƒê√£ Ch·ªânh S·ª≠a ---
        
        // CHU·ªñI TIN NH·∫ÆN M·ªöI
        const messages = [
            { text: "3", duration: 1000 },
            { text: "2", duration: 1000 },
            { text: "1", duration: 1000 },
            { text: "CH·ªíNG IU 19-11 VUI V·∫∫", duration: 2500 },
            { text: "CH√öC ANH S·ª®C KHO·∫∫", duration: 2500 }, // D√≤ng m·ªõi
            { text: "CH√öC ANH LU√îN TH√ÄNH C√îNG", duration: 2500 },
            { text: "LU√îN V·ªÆNG V√ÄNG", duration: 2000 },
            { text: "LU√îN Y√äU EM", duration: 3000 },
            { text: "M·ª™NG NG√ÄY QU·ªêC T·∫æ ƒê√ÄN √îNG ü•∞", duration: 5000 }, 
        ];

        let messageIndex = 0;

        function updateOverlayText() {
            // Ki·ªÉm tra xem c√≤n tin nh·∫Øn trong chu·ªói kh√¥ng
            if (messageIndex < messages.length) {
                const currentMessage = messages[messageIndex];

                // 1. Th√™m hi·ªáu ·ª©ng tan bi·∫øn cho tin nh·∫Øn c≈© (n·∫øu c√≥)
                if (overlayText.classList.contains('show-text')) {
                    overlayText.classList.remove('show-text');
                    overlayText.classList.add('hide-text');

                    // ƒê·ª£i hi·ªáu ·ª©ng tan bi·∫øn k·∫øt th√∫c (0.5s) tr∆∞·ªõc khi ƒë·ªïi n·ªôi dung
                    setTimeout(() => {
                        showNextMessage(currentMessage);
                    }, 500); 

                } else {
                    // Tin nh·∫Øn ƒë·∫ßu ti√™n kh√¥ng c·∫ßn hi·ªáu ·ª©ng tan bi·∫øn
                    showNextMessage(currentMessage);
                }
            } else if (messageIndex === messages.length) {
                // ƒê√¢y l√† b∆∞·ªõc cu·ªëi c√πng: Hi·ªÉn th·ªã Tr√°i tim
                
                // 1. K√≠ch ho·∫°t hi·ªáu ·ª©ng tan bi·∫øn cho tin nh·∫Øn cu·ªëi c√πng
                overlayText.classList.remove('show-text');
                overlayText.classList.remove('final-heart'); 
                overlayText.classList.add('hide-text');

                // 2. ƒê·ª£i tan bi·∫øn xong, hi·ªÉn th·ªã tr√°i tim
                setTimeout(() => {
                    overlayText.innerHTML = "‚ù§Ô∏è"; // Hi·ªÉn th·ªã tr√°i tim
                    
                    // Lo·∫°i b·ªè class tan bi·∫øn, th√™m class hi·ªÉn th·ªã v√† class tr√°i tim
                    overlayText.classList.remove('hide-text');
                    overlayText.classList.add('final-heart'); // √Åp d·ª•ng k√≠ch th∆∞·ªõc/m√†u ƒë·ªè
                    overlayText.classList.add('show-text');
                }, 500); 

                // Ng·ª´ng chu·ªói tin nh·∫Øn sau khi tr√°i tim ƒë∆∞·ª£c hi·ªÉn th·ªã
                messageIndex++; 

            } else {
                // Gi·ªØ tr√°i tim hi·ªÉn th·ªã v√† nh·∫•p nh√°y 
                overlayText.classList.remove('hide-text');
                overlayText.classList.add('show-text');
                overlayText.classList.add('final-heart');
            }
        }

        function showNextMessage(currentMessage) {
            // ƒê·∫∑t n·ªôi dung m·ªõi
            overlayText.innerHTML = currentMessage.text; 

            // Lo·∫°i b·ªè class tan bi·∫øn v√† th√™m class hi·ªÉn th·ªã (ƒë·ªìng th·ªùi lo·∫°i b·ªè class heart n·∫øu c√≥)
            overlayText.classList.remove('hide-text');
            overlayText.classList.remove('final-heart'); 
            overlayText.classList.add('show-text'); // K√≠ch ho·∫°t hi·ªáu ·ª©ng xu·∫•t hi·ªán

            // ƒê·∫∑t timeout ƒë·ªÉ chuy·ªÉn sang tin nh·∫Øn ti·∫øp theo
            setTimeout(() => {
                messageIndex++;
                updateOverlayText(); // G·ªçi ƒë·ªá quy ƒë·ªÉ ti·∫øp t·ª•c chu·ªói
            }, currentMessage.duration);
        }

        // V√≤ng l·∫∑p ch√≠nh ƒë·ªÉ v·∫Ω li√™n t·ª•c hi·ªáu ·ª©ng Matrix
        function loop() {
            draw(); 
            requestAnimationFrame(loop); // Y√™u c·∫ßu tr√¨nh duy·ªát v·∫Ω khung h√¨nh ti·∫øp theo
        }

        // Kh·ªüi ƒë·ªông
        loop(); // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng Matrix
        updateOverlayText(); // B·∫Øt ƒë·∫ßu chu·ªói tin nh·∫Øn
    </script>
</body>
</html>
